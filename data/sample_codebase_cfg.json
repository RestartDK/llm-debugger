{
  "project": "buggy_python_project",
  "files": {
    "/project/math_ops.py": {
      "functions": {
        "compute_average": {
          "entry_node": "compute_average.entry",
          "exit_node": "compute_average.exit",
          "nodes": [
            {
              "id": "compute_average.entry",
              "type": "ENTRY",
              "text": "def compute_average(nums):",
              "line": 1,
              "indent": 0,
              "metadata": {}
            },
            {
              "id": "compute_average.if_empty",
              "type": "IF",
              "text": "if len(nums) == 0:",
              "line": 4,
              "indent": 1,
              "metadata": {
                "condition": "len(nums) == 0",
                "variables_read": ["nums"]
              }
            },
            {
              "id": "compute_average.return_zero",
              "type": "RETURN",
              "text": "return 0  # Maybe should raise error?",
              "line": 5,
              "indent": 2,
              "metadata": { "returns_value": true }
            },
            {
              "id": "compute_average.sum_init",
              "type": "ASSIGN",
              "text": "total = 0",
              "line": 7,
              "indent": 1,
              "metadata": {
                "variables_written": ["total"]
              }
            },
            {
              "id": "compute_average.loop",
              "type": "FOR",
              "text": "for n in nums:",
              "line": 8,
              "indent": 1,
              "metadata": {
                "iterator": "n in nums",
                "variables_read": ["nums"]
              }
            },
            {
              "id": "compute_average.loop_body_add",
              "type": "ASSIGN",
              "text": "total += n  # Bug: type error if n is not int",
              "line": 9,
              "indent": 2,
              "metadata": {
                "variables_read": ["total", "n"],
                "variables_written": ["total"]
              }
            },
            {
              "id": "compute_average.return_avg",
              "type": "RETURN",
              "text": "return total / len(nums)  # Bug: floor division may be needed",
              "line": 11,
              "indent": 1,
              "metadata": { "returns_value": true }
            },
            {
              "id": "compute_average.exit",
              "type": "EXIT",
              "text": "",
              "line": null,
              "indent": 0,
              "metadata": {}
            }
          ],
          "edges": [
            { "from": "compute_average.entry", "to": "compute_average.if_empty", "type": "control" },
            { "from": "compute_average.if_empty", "to": "compute_average.return_zero", "type": "control", "label": "true" },
            { "from": "compute_average.if_empty", "to": "compute_average.sum_init", "type": "control", "label": "false" },
            { "from": "compute_average.return_zero", "to": "compute_average.exit", "type": "return" },
            { "from": "compute_average.sum_init", "to": "compute_average.loop", "type": "control" },
            { "from": "compute_average.loop", "to": "compute_average.loop_body_add", "type": "control", "label": "loop_body" },
            { "from": "compute_average.loop_body_add", "to": "compute_average.loop", "type": "control", "label": "loop_continue" },
            { "from": "compute_average.loop", "to": "compute_average.return_avg", "type": "control", "label": "loop_exit" },
            { "from": "compute_average.return_avg", "to": "compute_average.exit", "type": "return" }
          ]
        }
      }
    },

    "/project/data_loader.py": {
      "functions": {
        "load_numbers": {
          "entry_node": "load_numbers.entry",
          "exit_node": "load_numbers.exit",
          "nodes": [
            {
              "id": "load_numbers.entry",
              "type": "ENTRY",
              "text": "def load_numbers(path):",
              "line": 1,
              "indent": 0
            },
            {
              "id": "load_numbers.open_file",
              "type": "CALL",
              "text": "f = open(path, 'r')  # Bug: no error handling",
              "line": 3,
              "indent": 1,
              "metadata": { "called_function": "open" }
            },
            {
              "id": "load_numbers.read_lines",
              "type": "ASSIGN",
              "text": "lines = f.readlines()",
              "line": 4,
              "indent": 1
            },
            {
              "id": "load_numbers.list_init",
              "type": "ASSIGN",
              "text": "nums = []",
              "line": 6,
              "indent": 1
            },
            {
              "id": "load_numbers.loop",
              "type": "FOR",
              "text": "for line in lines:",
              "line": 7,
              "indent": 1,
              "metadata": { "iterator": "line in lines" }
            },
            {
              "id": "load_numbers.int_cast",
              "type": "ASSIGN",
              "text": "nums.append(int(line.strip()))  # Bug: crashes if not numeric",
              "line": 8,
              "indent": 2
            },
            {
              "id": "load_numbers.close_file",
              "type": "CALL",
              "text": "f.close()",
              "line": 10,
              "indent": 1,
              "metadata": { "called_function": "close" }
            },
            {
              "id": "load_numbers.return_nums",
              "type": "RETURN",
              "text": "return nums",
              "line": 11,
              "indent": 1
            },
            {
              "id": "load_numbers.exit",
              "type": "EXIT",
              "text": "",
              "line": null,
              "indent": 0
            }
          ],
          "edges": [
            { "from": "load_numbers.entry", "to": "load_numbers.open_file", "type": "control" },
            { "from": "load_numbers.open_file", "to": "load_numbers.read_lines", "type": "control" },
            { "from": "load_numbers.read_lines", "to": "load_numbers.list_init", "type": "control" },
            { "from": "load_numbers.list_init", "to": "load_numbers.loop", "type": "control" },
            { "from": "load_numbers.loop", "to": "load_numbers.int_cast", "label": "loop_body" },
            { "from": "load_numbers.int_cast", "to": "load_numbers.loop", "label": "loop_continue" },
            { "from": "load_numbers.loop", "to": "load_numbers.close_file", "label": "loop_exit" },
            { "from": "load_numbers.close_file", "to": "load_numbers.return_nums", "type": "control" },
            { "from": "load_numbers.return_nums", "to": "load_numbers.exit", "type": "return" }
          ]
        }
      }
    },

    "/project/utils/helpers.py": {
      "functions": {
        "safe_div": {
          "entry_node": "safe_div.entry",
          "exit_node": "safe_div.exit",
          "nodes": [
            {
              "id": "safe_div.entry",
              "type": "ENTRY",
              "text": "def safe_div(a, b):",
              "line": 1
            },
            {
              "id": "safe_div.try",
              "type": "TRY",
              "text": "try:",
              "line": 3
            },
            {
              "id": "safe_div.return_div",
              "type": "RETURN",
              "text": "return a / b",
              "line": 4
            },
            {
              "id": "safe_div.except_zero",
              "type": "EXCEPT",
              "text": "except:",
              "line": 5,
              "metadata": { "exception_type": "Exception" }
            },
            {
              "id": "safe_div.return_none",
              "type": "RETURN",
              "text": "return None  # Bug: hides errors silently",
              "line": 6
            },
            {
              "id": "safe_div.exit",
              "type": "EXIT"
            }
          ],
          "edges": [
            { "from": "safe_div.entry", "to": "safe_div.try" },
            { "from": "safe_div.try", "to": "safe_div.return_div", "type": "control", "label": "no_exception" },
            { "from": "safe_div.try", "to": "safe_div.except_zero", "type": "exception" },
            { "from": "safe_div.return_div", "to": "safe_div.exit", "type": "return" },
            { "from": "safe_div.except_zero", "to": "safe_div.return_none", "label": "exception_handler" },
            { "from": "safe_div.return_none", "to": "safe_div.exit", "type": "return" }
          ]
        }
      }
    },

    "/project/main.py": {
      "functions": {
        "main": {
          "entry_node": "main.entry",
          "exit_node": "main.exit",
          "nodes": [
            {
              "id": "main.entry",
              "type": "ENTRY",
              "text": "def main():",
              "line": 1
            },
            {
              "id": "main.load_call",
              "type": "CALL",
              "text": "nums = load_numbers(\"data.txt\")",
              "line": 3,
              "metadata": { "called_function": "load_numbers" }
            },
            {
              "id": "main.avg_call",
              "type": "CALL",
              "text": "avg = compute_average(nums)",
              "line": 4,
              "metadata": { "called_function": "compute_average" }
            },
            {
              "id": "main.print",
              "type": "CALL",
              "text": "print(\"Average is\", avg)",
              "line": 5
            },
            {
              "id": "main.exit",
              "type": "EXIT"
            }
          ],
          "edges": [
            { "from": "main.entry", "to": "main.load_call" },
            { "from": "main.load_call", "to": "main.avg_call" },
            { "from": "main.avg_call", "to": "main.print" },
            { "from": "main.print", "to": "main.exit" }
          ]
        }
      }
    }
  },

  "cross_references": [
    {
      "source_file": "/project/main.py",
      "source_function": "main",
      "source_node": "main.load_call",
      "target_file": "/project/data_loader.py",
      "target_function": "load_numbers",
      "type": "call"
    },
    {
      "source_file": "/project/main.py",
      "source_function": "main",
      "source_node": "main.avg_call",
      "target_file": "/project/math_ops.py",
      "target_function": "compute_average",
      "type": "call"
    }
  ]
}
